
<VirtualHost *:80>

  WSGIScriptAlias /  <%= projectpath%>/vagrant-wsgi.py
  WSGIDaemonProcess <%= appuser%> user=vagrant group=vagrant threads=3 processes=2
  WSGIProcessGroup vagrant

  ErrorLog "/var/log/digitaldeck-error.log"
  CustomLog "/var/log/digitaldeck-access.log" combined

  Alias /media/admin <%= projectpath%>/django/django/contrib/admin/static/admin

  ServerAdmin madrona@ecotrust.org

  DocumentRoot /var/www
  <Directory />
        Options FollowSymLinks
        AllowOverride All 
  </Directory>
  <Directory /var/www/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        allow from all
  </Directory>
  <Location /admin-media>
    Order allow,deny
    Allow from all
  </Location>

  Alias /media <%= projectpath%>/mediaroot

  <Location /media>
    #GZIP media files just not images or for IE6
    SetOutputFilter DEFLATE
    SetEnvIfNoCase Request_URI \
    \.(?:gif|jpe?g|png)$ no-gzip dont-vary
    BrowserMatch \bMSIE\s6 no-gzip

    Order allow,deny
    Allow from all
  </Location>

  Alias /docs <%= projectpath%>/docs

  <Location /docs>
    Order allow,deny
    Allow from all
  </Location>

</VirtualHost>
